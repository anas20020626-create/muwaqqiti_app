<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ÙˆÙ‚Ù‘ØªÙŠ</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0b2a4a;
  color: gold;
}

header {
  text-align: center;
  padding: 15px;
  font-size: 20px;
  border-bottom: 1px solid gold;
}

.page { display: none; padding: 15px; }
.page.active { display: block; }

nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: #081f36;
  display: flex;
  border-top: 1px solid gold;
}

nav button {
  flex: 1;
  background: none;
  border: none;
  color: gold;
  padding: 10px;
  font-size: 13px;
}

.card {
  background: rgba(255,215,0,0.08);
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 10px;
}

/* Ø§Ù„Ù‚Ø¨Ù„Ø© */
.compass {
  width: 230px;
  height: 230px;
  border-radius: 50%;
  border: 6px solid gold;
  margin: 20px auto;
  position: relative;
}

.needle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: bottom center;
  transform: translate(-50%, -100%);
  font-size: 40px;
  color: red;
}

.kaaba {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
}
</style>
</head>

<body>

<header>ğŸ“¿ Ù…ÙˆÙ‚Ù‘ØªÙŠ</header>

<!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="home" class="page active">
  <h3 id="hijriDate"></h3>

  <div class="card" id="prayers"></div>

  <button onclick="loadPrayers(0)">Ø§Ù„ÙŠÙˆÙ…</button>
  <button onclick="loadPrayers(1)">ØºØ¯Ù‹Ø§</button>
</div>

<!-- Ø§Ù„Ù‚Ø¨Ù„Ø© -->
<div id="qibla" class="page">
  <h3>ğŸ§­ Ø§Ù„Ù‚Ø¨Ù„Ø©</h3>
  <button onclick="startCompass()">ØªØ´ØºÙŠÙ„</button>

  <div class="compass">
    <div class="kaaba">ğŸ•‹</div>
    <div class="needle" id="needle">â–²</div>
  </div>

  <p id="qiblaStatus"></p>
</div>

<!-- Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<div id="quran" class="page">
  <h3>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h3>
  <select id="surahSelect"></select>
  <div id="ayahs"></div>
</div>

<!-- Ø§Ù„Ø£Ø°ÙƒØ§Ø± -->
<div id="azkar" class="page">
  <h3>ğŸ“¿ Ø£Ø°ÙƒØ§Ø±</h3>
  <div class="card">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</div>
  <div class="card">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</div>
  <div class="card">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡</div>
  <div class="card">Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</div>
  <div class="card">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø­Ù…Ø¯</div>
</div>

<!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div id="settings" class="page">
  <label>
    <input type="checkbox" id="vibration" checked>
    ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
  </label>
</div>

<nav>
  <button onclick="showPage('home')">ğŸ </button>
  <button onclick="showPage('qibla')">ğŸ§­</button>
  <button onclick="showPage('quran')">ğŸ“–</button>
  <button onclick="showPage('azkar')">ğŸ“¿</button>
  <button onclick="showPage('settings')">âš™ï¸</button>
</nav>

<script>
function showPage(id) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© + Ù‡Ø¬Ø±ÙŠ */
function loadPrayers(day) {
  navigator.geolocation.getCurrentPosition(pos=>{
    fetch(`https://api.aladhan.com/v1/timings/${day}?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=4`)
    .then(r=>r.json())
    .then(d=>{
      document.getElementById("hijriDate").innerText =
        "ğŸ“… " + d.data.date.hijri.date;
      const t=d.data.timings;
      document.getElementById("prayers").innerHTML =
        `Ø§Ù„ÙØ¬Ø±: ${t.Fajr}<br>Ø§Ù„Ø¸Ù‡Ø±: ${t.Dhuhr}<br>Ø§Ù„Ø¹ØµØ±: ${t.Asr}<br>Ø§Ù„Ù…ØºØ±Ø¨: ${t.Maghrib}<br>Ø§Ù„Ø¹Ø´Ø§Ø¡: ${t.Isha}`;
    });
  });
}
loadPrayers(0);

/* Ø§Ù„Ù‚Ø±Ø¢Ù† API */
fetch("https://api.alquran.cloud/v1/surah")
.then(r=>r.json())
.then(d=>{
  d.data.forEach(s=>{
    const o=document.createElement("option");
    o.value=s.number;
    o.textContent=s.number+" - "+s.name;
    surahSelect.appendChild(o);
  });
});

surahSelect.onchange=()=>{
  fetch(`https://api.alquran.cloud/v1/surah/${surahSelect.value}`)
  .then(r=>r.json())
  .then(d=>{
    ayahs.innerHTML="";
    d.data.ayahs.forEach(a=>{
      ayahs.innerHTML+=`<p>${a.text} (${a.numberInSurah})</p>`;
    });
  });
};

/* Ø§Ù„Ù‚Ø¨Ù„Ø© */
const K_LAT=21.4225, K_LNG=39.8262;
function startCompass(){
navigator.geolocation.getCurrentPosition(p=>{
const lat=p.coords.latitude,lng=p.coords.longitude;
const q=Math.atan2(
Math.sin((K_LNG-lng)*Math.PI/180),
Math.cos(lat*Math.PI/180)*Math.tan(K_LAT*Math.PI/180)-Math.sin(lat*Math.PI/180)*Math.cos((K_LNG-lng)*Math.PI/180)
)*180/Math.PI;
window.ondeviceorientation=e=>{
const d=(q-(360-e.alpha)+360)%360;
needle.style.transform=`translate(-50%,-100%) rotate(${d}deg)`;
if(Math.abs(d)<5&&vibration.checked)navigator.vibrate(200);
};
});
}
</script>

</body>
</html>
