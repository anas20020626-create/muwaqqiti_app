<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆØ§Ù‚ÙŠØªÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --bg-dark:#0b1d33;
      --bg-light:#f6e7b2;
      --gold:#d4af37;
      --blue:#0b1d33;
      --card:#12263f;
    }

    body{
      margin:0;
      font-family: "Tahoma", sans-serif;
      background: var(--bg-dark);
      color: var(--gold);
      transition:0.3s;
    }

    body.light{
      background: var(--bg-light);
      color: var(--blue);
    }

    header{
      text-align:center;
      padding:20px;
      font-size:28px;
      font-weight:bold;
      letter-spacing:2px;
      border-bottom:2px solid var(--gold);
    }

    .container{
      padding:15px;
    }

    .card{
      background:var(--card);
      padding:15px;
      margin-bottom:15px;
      border-radius:15px;
    }

    body.light .card{
      background:white;
    }

    .date-box{
      text-align:center;
      font-size:18px;
      margin-bottom:10px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      text-align:center;
    }

    th,td{
      padding:10px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }

    .next{
      background:rgba(212,175,55,0.2);
      font-weight:bold;
    }

    .countdown{
      text-align:center;
      margin-top:10px;
      font-size:18px;
    }

    .bottom-nav{
      position:fixed;
      bottom:0;
      width:100%;
      background:#000;
      display:flex;
      justify-content:space-around;
      padding:10px 0;
    }

    .bottom-nav a{
      color:var(--gold);
      text-decoration:none;
      font-size:18px;
    }

    body.light .bottom-nav{
      background:#ddd;
    }
  </style>
</head>

<body>

<header>Ù…Ù€Ù€ÙˆØ§Ù‚ÙŠÙ€Ù€ØªÙ€Ù€ÙŠ</header>

<div class="container">

  <div class="card date-box" id="hijriDate">
    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ...
  </div>

  <div class="card">
    <table id="prayerTable">
      <tr><th>Ø§Ù„ØµÙ„Ø§Ø©</th><th>Ø§Ù„ÙˆÙ‚Øª</th></tr>
    </table>

    <div class="countdown" id="countdown">
      â³ Ø¬Ø§Ø±ÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©...
    </div>
  </div>

</div>

<div class="bottom-nav">
  <a href="#">ğŸ </a>
  <a href="settings.html">âš™ï¸</a>
</div>

<script>
/* ===== Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„ØµØ­ÙŠØ­ ===== */
function getHijri(){
  const today = new Date();
  const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic',{
    weekday:'long',
    day:'numeric',
    month:'long',
    year:'numeric'
  }).format(today);

  document.getElementById("hijriDate").innerText =
    "Ø§Ù„ÙŠÙˆÙ…: " + hijri + " Ù‡Ù€";
}

/* ===== Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© (Ù…Ø«Ø§Ù„ Ù…Ø¯Ø±Ø³ÙŠ Ø«Ø§Ø¨Øª) ===== */
const prayers = [
  {name:"Ø§Ù„ÙØ¬Ø±", time:"05:20"},
  {name:"Ø§Ù„Ø¸Ù‡Ø±", time:"12:10"},
  {name:"Ø§Ù„Ø¹ØµØ±", time:"15:30"},
  {name:"Ø§Ù„Ù…ØºØ±Ø¨", time:"17:50"},
  {name:"Ø§Ù„Ø¹Ø´Ø§Ø¡", time:"19:20"}
];

function loadPrayers(){
  const table = document.getElementById("prayerTable");
  const now = new Date();
  let nextFound = false;
  let nextTime = null;
  let nextName = "";

  prayers.forEach(p=>{
    const tr = document.createElement("tr");
    const t = new Date();
    t.setHours(p.time.split(":")[0],p.time.split(":")[1],0);

    if(!nextFound && t > now){
      tr.classList.add("next");
      nextFound = true;
      nextTime = t;
      nextName = p.name;
    }

    tr.innerHTML = `<td>${p.name}</td><td>${p.time}</td>`;
    table.appendChild(tr);
  });

  if(nextTime){
    startCountdown(nextTime,nextName);
  }else{
    document.getElementById("countdown").innerText =
      "Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙ„Ø§Ø© Ù‚Ø§Ø¯Ù…Ø© Ø§Ù„ÙŠÙˆÙ…";
  }
}

/* ===== Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ===== */
function startCountdown(time,name){
  setInterval(()=>{
    const now = new Date();
    const diff = time - now;
    if(diff <= 0) return;

    const h = Math.floor(diff/1000/60/60);
    const m = Math.floor(diff/1000/60)%60;
    const s = Math.floor(diff/1000)%60;

    document.getElementById("countdown").innerText =
      `Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${name} Ø¨Ø¹Ø¯ ${h}Ø³ ${m}Ø¯ ${s}Ø«`;
  },1000);
}

getHijri();
loadPrayers();
</script>

</body>
</html>
